{"version":3,"sources":["../../src/pages/selectproduit/selectproduit.module.ts","../../src/pages/selectproduit/selectproduit.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAAyC;AACO;AACI;AAUpD;IAAA;IAAsC,CAAC;IAA1B,uBAAuB;QARnC,+DAAQ,CAAC;YACR,YAAY,EAAE;gBACZ,yEAAiB;aAClB;YACD,OAAO,EAAE;gBACP,sEAAe,CAAC,QAAQ,CAAC,yEAAiB,CAAC;aAC5C;SACF,CAAC;OACW,uBAAuB,CAAG;IAAD,8BAAC;CAAA;AAAH;;;;;;;;;;;;;;;;;;;;;;;;;ACZM;AAC4F;AAC7F;AACyB;AACjB;AACgC;AAOjF;IAKE,2BACS,OAAsB,EACtB,SAA0B,EAC1B,SAAoB,EACpB,SAA0B,EAC1B,QAAwB,EACxB,YAAiC,EACjC,MAAa,EACb,OAAwB,EACxB,WAA8B,EAC9B,MAAiB,EACjB,OAAgB;QAVhB,YAAO,GAAP,OAAO,CAAe;QACtB,cAAS,GAAT,SAAS,CAAiB;QAC1B,cAAS,GAAT,SAAS,CAAW;QACpB,cAAS,GAAT,SAAS,CAAiB;QAC1B,aAAQ,GAAR,QAAQ,CAAgB;QACxB,iBAAY,GAAZ,YAAY,CAAqB;QACjC,WAAM,GAAN,MAAM,CAAO;QACb,YAAO,GAAP,OAAO,CAAiB;QACxB,gBAAW,GAAX,WAAW,CAAmB;QAC9B,WAAM,GAAN,MAAM,CAAW;QACjB,YAAO,GAAP,OAAO,CAAS;QAdzB,aAAQ,GAAU,EAAE;QACpB,cAAS,GAAG,EAAE,CAAC;QACf,YAAO,GAAS,KAAK,CAAC;QAalB,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,oBAAoB,EAAC;YACzC,kBAAkB;QACnB,CAAC,CAAC;IACP,CAAC;IAED,0CAAc,GAAd;QACI,IAAI,CAAC,QAAQ,EAAE;IACnB,CAAC;IAED,oCAAQ,GAAR;QAAA,iBAYC;QAXC,IAAI,CAAC,OAAO,GAAC,IAAI,CAAC;QAClB,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,SAAS,EAAC,IAAI,CAAC,YAAY,CAAC,QAAQ,EAAE,CAAC,CAAC,IAAI,CAAC,cAAI;YAChE,KAAI,CAAC,QAAQ,GAAC,IAAI,EAAC,KAAI,EAAC,GAAE;YAC1B,KAAI,CAAC,OAAO,GAAC,KAAK,CAAC;YACnB,KAAI,CAAC,YAAY,CAAC,SAAS,CAAC,KAAI,CAAC,YAAY,CAAC,QAAQ,EAAE,CAAC,CAAC;QAC5D,CAAC,EAAC,eAAK;YACL,KAAI,CAAC,YAAY,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC;YACnC,KAAI,CAAC,OAAO,GAAC,KAAK,CAAC;YACnB,KAAI,CAAC,MAAM,CAAC,OAAO,CAAC,EAAC,OAAO,EAAC,oCAAoC,EAAC,CAAC;QACrE,CAAC,CAAC;IAEJ,CAAC;IAED,mCAAO,GAAP,UAAQ,IAAS;QACf,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;IAChC,CAAC;IAEC,0CAAc,GAAd;QAAA,iBAYC;QAXC,IAAI,MAAM,GAAE,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC;YAC9B,OAAO,EAAE,eAAe;SACzB,CAAC,CAAC;QACH,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,SAAS,EAAC,IAAI,CAAC,YAAY,CAAC,QAAQ,EAAE,CAAC,CAAC,IAAI,CAAC,cAAI;YAChE,KAAI,CAAC,QAAQ,GAAC,IAAI,EAAC,KAAI,EAAC,GAAE;YAC1B,MAAM,CAAC,OAAO,EAAE,CAAC;QACnB,CAAC,EAAC,eAAK;YACL,MAAM,CAAC,OAAO,EAAE,CAAC;YACjB,KAAI,CAAC,MAAM,CAAC,OAAO,CAAC,EAAC,OAAO,EAAC,mCAAmC,EAAC,CAAC;QACpE,CAAC,CAAC;QACF,MAAM,CAAC,OAAO,EAAE,CAAC;IACnB,CAAC;IAED,kCAAM,GAAN,UAAO,OAAW;QAChB,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC;IACjC,CAAC;IAED,+BAAG,GAAH,UAAI,OAAU;QAAd,iBAeA;QAfI,sCAAU;QACZ,IAAI,KAAK,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,aAAa,EAAC,EAAC,OAAO,EAAC,OAAO,EAAC,KAAK,EAAC,IAAI,EAAC,EAAE,EAAE,QAAQ,EAAE,aAAa,EAAE,CAAC;QAC3G,KAAK,CAAC,YAAY,CAAC,cAAI;YACtB,IAAI,KAAK,GAAC,CAAC,CAAC,CAAC;YACb,EAAE,EAAC,CAAC,IAAI,CAAC;gBACR,MAAM;YACR,EAAE,EAAC,IAAI,CAAC,SAAS,IAAE,IAAI,CAAC,EAAE,CAAC,EAAC;gBACxB,KAAK,GAAE,KAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,cAAI,IAAE,WAAI,CAAC,EAAE,IAAE,IAAI,CAAC,SAAS,IAAE,IAAI,CAAC,EAAE,IAAE,IAAI,CAAC,EAAE,EAAzC,CAAyC,CAAC,CAAC;gBAC/E,EAAE,EAAC,KAAK,GAAC,CAAC,CAAC,CAAC;oBACb,KAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,KAAK,EAAC,CAAC,CAAC,CAAC;gBAC9B,KAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC,EAAC,CAAC,EAAC,IAAI,CAAC,CAAC;gBAC/B,KAAI,CAAC,MAAM,CAAC,IAAI,CAAC;YACnB,CAAC;QACH,CAAC,CAAC;QACF,KAAK,CAAC,OAAO,EAAE;IACjB,CAAC;IAGA,kCAAM,GAAN;QAAA,iBAQC;QAPC,IAAI,SAAS,GAAG,IAAI,CAAC,SAAS,CAAC,WAAW,EAAE,CAAC,OAAO,CAAC,SAAS,EAAE,GAAG,CAAC,CAAC;QACrE,IAAI,UAAU,GAAG,SAAS,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,MAAM,CAAC,WAAC,IAAI,QAAC,CAAC,CAAC,CAAC,IAAI,EAAE,CAAC,MAAM,EAAjB,CAAiB,CAAC,CAAC;QACrE,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,cAAI;YACxB,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;YACjB,KAAI,CAAC,MAAM,CAAC,IAAI,EAAE,UAAU,CAAC,CAAC;QAChC,CAAC,CAAC,CAAC;IAEL,CAAC;IACD,kCAAM,GAAN,UAAO,IAAI,EAAE,UAAU;QACrB,IAAI,gBAAgB,GAAG,KAAK,CAAC;QAC7B,EAAE,CAAC,CAAC,UAAU,CAAC,MAAM,CAAC,CAAC,CAAC;YACtB,yEAAyE;YACzE,UAAU,CAAC,OAAO,CAAC,mBAAS;gBAC1B,EAAE,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,WAAW,EAAE,CAAC,OAAO,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;oBACnD,gBAAgB,GAAG,IAAI,CAAC;gBAC1B,CAAC;YACH,CAAC,CAAC,CAAC;QACL,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,sEAAsE;YACtE,gBAAgB,GAAG,IAAI,CAAC;QAC1B,CAAC;QACD,IAAI,CAAC,IAAI,GAAG,CAAC,CAAC,gBAAgB,CAAC,CAAC;IAClC,CAAC;IAvGU,iBAAiB;QAJ7B,gEAAS,CAAC;YACT,QAAQ,EAAE,oBAAoB;WACG;SAClC,CAAC;mFAO+B;YACX,iEAAe;YACf,sEAAS;YACT,sEAAe;YAChB,kGAAc;YACX,8DAAoB;YAC1B,mFAAM;YACJ,wEAAe;YACX,mEAAiB;YACtB,iEAAS;YACR,OAAO;OAhBd,iBAAiB,CAwG7B;IAAD,CAAC;AAAA;SAxGY,iBAAiB,e","file":"12.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { SelectproduitPage } from './selectproduit';\n\n@NgModule({\n  declarations: [\n    SelectproduitPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(SelectproduitPage),\n  ],\n})\nexport class SelectproduitPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/selectproduit/selectproduit.module.ts","import { Component } from '@angular/core';\r\nimport { IonicPage, NavController, NavParams, AlertController, LoadingController, ViewController  ,ModalController, Events} from 'ionic-angular';\r\nimport { Storage } from '@ionic/storage';\r\nimport { ManagerProvider } from '../../providers/manager/manager';\r\nimport { AppNotify } from '../../app/app-notify';\r\nimport { LocalisationProvider } from '../../providers/localisation/localisation';\r\n\r\n@IonicPage()\r\n@Component({\r\n  selector: 'page-selectproduit',\r\n  templateUrl: 'selectproduit.html',\r\n})\r\nexport class SelectproduitPage {\r\n\r\n  produits: any[] = []\r\n  queryText = '';\r\n  loading:boolean=false;\r\n  constructor(\r\n    public navCtrl: NavController,\r\n    public alertCtrl: AlertController,\r\n    public navParams: NavParams,\r\n    public modalCtrl: ModalController,\r\n    public viewCtrl: ViewController,\r\n    public localisation:LocalisationProvider,\r\n    public events:Events,\r\n    public manager: ManagerProvider,\r\n    public loadingCtrl: LoadingController,\r\n    public notify: AppNotify,\r\n    public storage: Storage) {\r\n      this.events.subscribe('loaded:produit:new',()=>{\r\n        //this.loadData();\r\n       })\r\n  }\r\n\r\n  ionViewDidLoad() {\r\n      this.loadData()\r\n  }\r\n\r\n  loadData(){ \r\n    this.loading=true;   \r\n    this.manager.get('produit',this.localisation.isOnline()).then(data=>{\r\n      this.produits=data?data:[]\r\n      this.loading=false; \r\n      this.localisation.onConnect(this.localisation.isOnline());\r\n    },error=>{\r\n      this.localisation.onConnect(false);\r\n      this.loading=false; \r\n      this.notify.onError({message:\" Verifiez votre connexion internet\"})\r\n    })\r\n\r\n  }\r\n\r\n  dismiss(data?:any) {\r\n    this.viewCtrl.dismiss(data);\r\n}\r\n\r\n  loadRemoteData(){\r\n    let loader= this.notify.loading({\r\n      content: \"chargement...\",\r\n    });    \r\n    this.manager.get('produit',this.localisation.isOnline()).then(data=>{\r\n      this.produits=data?data:[]\r\n      loader.dismiss();     \r\n    },error=>{\r\n      loader.dismiss();   \r\n      this.notify.onError({message:\"Verifiez votre connexion internet\"})\r\n    })\r\n    loader.present();\r\n  }\r\n \r\n  select(produit:any){\r\n    this.viewCtrl.dismiss(produit);\r\n  }\r\n\r\n  add(produit={}){\r\n    let modal=  this.modalCtrl.create('ProduitPage',{produit:produit,inset:true}, { cssClass: 'inset-modal' })\r\n   modal.onDidDismiss(data=>{\r\n    let index=-1;\r\n    if(!data)\r\n     return\r\n   if(data.deletedId||data.id){\r\n       index= this.produits.findIndex(item=>item.id==data.deletedId||item.id==data.id);\r\n        if(index>-1)\r\n       this.produits.splice(index,1);\r\n       this.produits.splice(0,0,data); \r\n       this.select(data) \r\n     }\r\n   }) \r\n   modal.present()\r\n }\r\n\r\n\r\n  search() {\r\n    let queryText = this.queryText.toLowerCase().replace(/,|\\.|-/g, ' ');\r\n    let queryWords = queryText.split(' ').filter(w => !!w.trim().length);\r\n    this.produits.forEach(item => {\r\n      item.hide = true;\r\n      this.filter(item, queryWords);\r\n    });\r\n\r\n  }\r\n  filter(item, queryWords) {\r\n    let matchesQueryText = false;\r\n    if (queryWords.length) {\r\n      // of any query word is in the session name than it passes the query test\r\n      queryWords.forEach(queryWord => {\r\n        if (item.nom.toLowerCase().indexOf(queryWord) > -1) {\r\n          matchesQueryText = true;\r\n        }\r\n      });\r\n    } else {\r\n      // if there are no query words then this session passes the query test\r\n      matchesQueryText = true;\r\n    }\r\n    item.hide = !(matchesQueryText);\r\n  }\r\n}\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/selectproduit/selectproduit.ts"],"sourceRoot":""}