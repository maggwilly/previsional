{"version":3,"sources":["../../src/pages/previsions/previsions.module.ts","../../src/pages/previsions/previsions.ts"],"names":[],"mappings":"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","file":"24.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { PrevisionsPage } from './previsions';\r\nimport { PipesModule} from '../../pipes/pipes.module';\r\nimport { DirectivesModule} from '../../directives/directives.module';\r\n@NgModule({\r\n  declarations: [\r\n    PrevisionsPage,\r\n  ],\r\n  imports: [\r\n    IonicPageModule.forChild(PrevisionsPage),\r\n    PipesModule,\r\n    DirectivesModule\r\n  ],\r\n})\r\nexport class PrevisionsPageModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/previsions/previsions.module.ts","import { Component } from '@angular/core';\r\nimport { IonicPage, NavController, NavParams, LoadingController, ModalController } from 'ionic-angular';\r\nimport { ManagerProvider } from '../../providers/manager/manager';\r\nimport { AppNotify } from '../../app/app-notify';\r\nimport * as moment from 'moment';\r\nimport { LocalisationProvider } from '../../providers/localisation/localisation';\r\n\r\n@IonicPage()\r\n@Component({\r\n  selector: 'page-previsions',\r\n  templateUrl: 'previsions.html',\r\n})\r\nexport class PrevisionsPage {\r\n  filtre:any\r\n  previsions:any[]=[]\r\n  queryText = '';\r\n  loading:boolean;\r\n  isOnline:boolean\r\n  constructor(\r\n    public navCtrl: NavController,\r\n    public modalCtrl: ModalController,\r\n    public localisation:LocalisationProvider,\r\n    public manager: ManagerProvider,\r\n    public loadingCtrl: LoadingController,\r\n    public notify: AppNotify,\r\n     public navParams: NavParams) {\r\n      this.isOnline=this.localisation.isOnline();\r\n  }\r\n\r\n  ionViewDidLoad() {\r\n    this.refresh(); \r\n  }\r\n\r\n  refresh(){\r\n    this.filtre={type:''\r\n    ,user:'',secteur:'',\r\n    ville:'',\r\n    afterdate:moment().startOf('month').format(\"YYYY-MM-DD\"),\r\n    beforedate:moment().endOf('month').format(\"YYYY-MM-DD\")};\r\n      if(this.localisation.isOnline())\r\n        return this.loadRemoteData();\r\n    return this.loadData()\r\n  }\r\n\r\n  loadData() {\r\n    this.loading=true;\r\n    this.manager.get('prevision').then(data => {\r\n      this.previsions = data?data:[]\r\n      this.loading=false;\r\n      this.localisation.onConnect(this.localisation.isOnline());\r\n    },error=>{\r\n      this.localisation.onConnect(false);\r\n      this.notify.onSuccess({message:\"PROBLEME ! Verifiez votre connexion internet\"})\r\n    })\r\n  };\r\n\r\n  loadRemoteData() {\r\n    /*let loader = this.loadingCtrl.create({\r\n      content: \"chargement...\",\r\n    });*/\r\n    this.loading=true;\r\n    this.manager.get('prevision',true,null,null,this.filtre,1).then(data => {\r\n      this.previsions = data?data:[]\r\n      console.log(this.previsions);\r\n      this.loading=false;\r\n     // loader.dismiss(); \r\n      this.localisation.onConnect(this.localisation.isOnline());\r\n    },error=>{\r\n      this.localisation.onConnect(false);\r\n     // loader.dismiss();\r\n      console.log(error);\r\n      this.notify.onSuccess({message:\"PROBLEME ! Verifiez votre connexion internet\"})\r\n    });\r\n    //loader.present();\r\n  }\r\n\r\n  openDetail(produit){\r\n    this.navCtrl.push('PrevisionDetailsPage', { produit: produit })\r\n  }\r\n  openFilter() {\r\n    let modal = this.modalCtrl.create('FiltreStatsPage', { filtre: this.filtre })\r\n    modal.onDidDismiss(data => {\r\n      if(!data)\r\n      return;\r\n    return this.loadRemoteData();\r\n    });\r\n    modal.present()\r\n  }\r\n\r\n  search() {\r\n    let queryText = this.queryText.toLowerCase().replace(/,|\\.|-/g, ' ');\r\n    let queryWords = queryText.split(' ').filter(w => !!w.trim().length);\r\n    this.previsions.forEach(item => {\r\n      item.hide = true;\r\n      this.filter(item, queryWords);\r\n    });\r\n\r\n  }\r\n  filter(item, queryWords) {\r\n    let matchesQueryText = false;\r\n    if (queryWords.length) {\r\n      // of any query word is in the session name than it passes the query test\r\n      queryWords.forEach(queryWord => {\r\n        if (item.nom.toLowerCase().indexOf(queryWord) > -1) {\r\n          matchesQueryText = true;\r\n        }\r\n      });\r\n    } else {\r\n      // if there are no query words then this session passes the query test\r\n      matchesQueryText = true;\r\n    }\r\n    item.hide = !(matchesQueryText);\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/previsions/previsions.ts"],"sourceRoot":""}