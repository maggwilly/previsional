{"version":3,"sources":["../../src/pages/secteurs/secteurs.module.ts","../../src/pages/secteurs/secteurs.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAAyC;AACO;AACN;AAU1C;IAAA;IAAiC,CAAC;IAArB,kBAAkB;QAR9B,+DAAQ,CAAC;YACR,YAAY,EAAE;gBACZ,+DAAY;aACb;YACD,OAAO,EAAE;gBACP,sEAAe,CAAC,QAAQ,CAAC,+DAAY,CAAC;aACvC;SACF,CAAC;OACW,kBAAkB,CAAG;IAAD,yBAAC;CAAA;AAAH;;;;;;;;;;;;;;;;;;;;;;;;;ACZW;AAC2E;AAC5E;AACyB;AAClB;AACiC;AACjF;;;;;GAKG;AAOH;IAKE,sBACS,OAAsB,EACtB,WAA8B,EAC9B,OAAwB,EACxB,SAA0B,EAC1B,YAAiC,EACjC,MAAiB,EACjB,MAAc,EACd,QAAwB,EACxB,OAAgB,EAChB,SAAoB;QATpB,YAAO,GAAP,OAAO,CAAe;QACtB,gBAAW,GAAX,WAAW,CAAmB;QAC9B,YAAO,GAAP,OAAO,CAAiB;QACxB,cAAS,GAAT,SAAS,CAAiB;QAC1B,iBAAY,GAAZ,YAAY,CAAqB;QACjC,WAAM,GAAN,MAAM,CAAW;QACjB,WAAM,GAAN,MAAM,CAAQ;QACd,aAAQ,GAAR,QAAQ,CAAgB;QACxB,YAAO,GAAP,OAAO,CAAS;QAChB,cAAS,GAAT,SAAS,CAAW;QAd7B,aAAQ,GAAU,EAAE;QACpB,cAAS,GAAG,EAAE,CAAC;QAeb,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,aAAa,CAAC;QACpD,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,oBAAoB,EAAE;YAC3C,mBAAmB;QACpB,CAAC,CAAC;IACJ,CAAC;IAED,qCAAc,GAAd;QACE,EAAE,CAAC,CAAC,IAAI,CAAC,WAAW,CAAC;YACnB,IAAI,CAAC,GAAG,EAAE;QACZ,IAAI,CAAC,QAAQ,EAAE;IACjB,CAAC;IAED,8BAAO,GAAP,UAAQ,IAAU;QAChB,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;IAC9B,CAAC;IAED,+BAAQ,GAAR;QAAA,iBAaC;QAZC,IAAI,CAAC,OAAO,GAAC,IAAI,CAAE;QACnB,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,SAAS,EAAC,IAAI,CAAC,YAAY,CAAC,QAAQ,EAAE,CAAC,CAAC,IAAI,CAAC,cAAI;YAChE,KAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE;YAChC,KAAI,CAAC,OAAO,GAAC,KAAK,CAAE;YACpB,KAAI,CAAC,YAAY,CAAC,SAAS,CAAC,KAAI,CAAC,YAAY,CAAC,QAAQ,EAAE,CAAC,CAAC;QAC5D,CAAC,EAAC,eAAK;YACL,KAAI,CAAC,YAAY,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC;YACnC,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;YACnB,KAAI,CAAC,OAAO,GAAC,KAAK,CAAE;YACpB,KAAI,CAAC,MAAM,CAAC,OAAO,CAAC,EAAE,OAAO,EAAE,oCAAoC,EAAE,CAAC;QACxE,CAAC,CAAC;IAEJ,CAAC;IAED,qCAAc,GAAd;QAAA,iBAgBC;QAfC,IAAI,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC;YAC/B,OAAO,EAAE,eAAe;SACzB,CAAC,CAAC;QACH,IAAI,CAAC,OAAO,GAAC,IAAI,CAAE;QACnB,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,SAAS,EAAE,IAAI,CAAC,CAAC,IAAI,CAAC,cAAI;YACzC,KAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE;YAChC,KAAI,CAAC,OAAO,GAAC,KAAK,CAAE;YACpB,MAAM,CAAC,OAAO,EAAE,CAAC;YACjB,KAAI,CAAC,YAAY,CAAC,SAAS,CAAC,KAAI,CAAC,YAAY,CAAC,QAAQ,EAAE,CAAC,CAAC;QAC5D,CAAC,EAAC,eAAK;YACL,KAAI,CAAC,YAAY,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC;YACnC,MAAM,CAAC,OAAO,EAAE,CAAC;YACjB,KAAI,CAAC,MAAM,CAAC,OAAO,CAAC,EAAE,OAAO,EAAE,mCAAmC,EAAE,CAAC;QACvE,CAAC,CAAC;QACF,MAAM,CAAC,OAAO,EAAE,CAAC;IACnB,CAAC;IAGD,0BAAG,GAAH,UAAI,OAAY;QAAhB,iBAcC;QAdG,sCAAY;QACd,IAAI,KAAK,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,aAAa,EAAE,EAAE,OAAO,EAAE,OAAO,EAAE,KAAK,EAAE,IAAI,EAAE,EAAE,EAAE,QAAQ,EAAE,aAAa,EAAE,CAAC;QAChH,KAAK,CAAC,YAAY,CAAC,cAAI;YACrB,IAAI,KAAK,GAAG,CAAC,CAAC,CAAC;YACf,EAAE,CAAC,CAAC,IAAI,IAAI,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC;gBACpB,KAAK,GAAG,KAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,cAAI,IAAI,WAAI,CAAC,EAAE,IAAI,IAAI,CAAC,EAAE,EAAlB,CAAkB,CAAC,CAAC;gBAC5D,KAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC;YACnC,CAAC;YAAC,IAAI,CAAC,EAAE,CAAC,CAAC,IAAI,IAAI,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC;gBAClC,KAAK,GAAG,KAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,cAAI,IAAI,WAAI,CAAC,EAAE,IAAI,IAAI,CAAC,SAAS,EAAzB,CAAyB,CAAC,CAAC;gBACnE,EAAE,CAAC,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC;oBACb,KAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;YACnC,CAAC;QACH,CAAC,CAAC;QACF,KAAK,CAAC,OAAO,EAAE;IACjB,CAAC;IAGD,6BAAM,GAAN;QAAA,iBAQC;QAPC,IAAI,SAAS,GAAG,IAAI,CAAC,SAAS,CAAC,WAAW,EAAE,CAAC,OAAO,CAAC,SAAS,EAAE,GAAG,CAAC,CAAC;QACrE,IAAI,UAAU,GAAG,SAAS,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,MAAM,CAAC,WAAC,IAAI,QAAC,CAAC,CAAC,CAAC,IAAI,EAAE,CAAC,MAAM,EAAjB,CAAiB,CAAC,CAAC;QACrE,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,cAAI;YACxB,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;YACjB,KAAI,CAAC,MAAM,CAAC,IAAI,EAAE,UAAU,CAAC,CAAC;QAChC,CAAC,CAAC,CAAC;IAEL,CAAC;IACD,6BAAM,GAAN,UAAO,IAAI,EAAE,UAAU;QACrB,IAAI,gBAAgB,GAAG,KAAK,CAAC;QAC7B,EAAE,CAAC,CAAC,UAAU,CAAC,MAAM,CAAC,CAAC,CAAC;YACtB,yEAAyE;YACzE,UAAU,CAAC,OAAO,CAAC,mBAAS;gBAC1B,EAAE,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,WAAW,EAAE,CAAC,OAAO,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;oBACnD,gBAAgB,GAAG,IAAI,CAAC;gBAC1B,CAAC;YACH,CAAC,CAAC,CAAC;QACL,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,sEAAsE;YACtE,gBAAgB,GAAG,IAAI,CAAC;QAC1B,CAAC;QACD,IAAI,CAAC,IAAI,GAAG,CAAC,CAAC,gBAAgB,CAAC,CAAC;IAClC,CAAC;IA3GU,YAAY;QAJxB,gEAAS,CAAC;YACT,QAAQ,EAAE,eAAe;WACG;SAC7B,CAAC;qFAO+B;YACT,oFAAiB;YACrB,sEAAe;YACb,kGAAe;YACb,mEAAoB;YACzB,8DAAS;YACT,qEAAM;YACJ,gEAAc;YACf,gEAAO;YACL,SAAS;OAflB,YAAY,CA4GxB;IAAD,CAAC;AAAA;SA5GY,YAAY,e","file":"56.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { SecteursPage } from './secteurs';\n\n@NgModule({\n  declarations: [\n    SecteursPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(SecteursPage),\n  ],\n})\nexport class SecteursPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/secteurs/secteurs.module.ts","import { Component } from '@angular/core';\r\nimport { IonicPage, NavController, NavParams, LoadingController, ModalController, ViewController, Events } from 'ionic-angular';\r\nimport { Storage } from '@ionic/storage';\r\nimport { ManagerProvider } from '../../providers/manager/manager';\r\nimport { AppNotify } from '../../app/app-notify'\r\nimport { LocalisationProvider } from '../../providers/localisation/localisation';\r\n/**\r\n * Generated class for the SecteursPage page.\r\n *\r\n * See https://ionicframework.com/docs/components/#navigation for more info on\r\n * Ionic pages and navigation.\r\n */\r\n\r\n@IonicPage()\r\n@Component({\r\n  selector: 'page-secteurs',\r\n  templateUrl: 'secteurs.html',\r\n})\r\nexport class SecteursPage {\r\n  secteurs: any[] = []\r\n  queryText = '';\r\n  openAddPage: any;\r\n  loading\r\n  constructor(\r\n    public navCtrl: NavController,\r\n    public loadingCtrl: LoadingController,\r\n    public manager: ManagerProvider,\r\n    public modalCtrl: ModalController,\r\n    public localisation:LocalisationProvider,\r\n    public notify: AppNotify,\r\n    public events: Events,\r\n    public viewCtrl: ViewController,\r\n    public storage: Storage,\r\n    public navParams: NavParams\r\n  ) {\r\n    this.openAddPage = this.navParams.get('openAddPage')\r\n    this.events.subscribe('loaded:secteur:new', () => {\r\n     // this.loadData();\r\n    })\r\n  }\r\n\r\n  ionViewDidLoad() {\r\n    if (this.openAddPage)\r\n      this.add()\r\n    this.loadData()\r\n  }\r\n\r\n  dismiss(data?: any) {\r\n    this.viewCtrl.dismiss(data);\r\n  }\r\n\r\n  loadData() {\r\n    this.loading=true ;\r\n    this.manager.get('secteur',this.localisation.isOnline()).then(data => {\r\n      this.secteurs = data ? data : []\r\n      this.loading=false ;\r\n      this.localisation.onConnect(this.localisation.isOnline());\r\n    },error=>{\r\n      this.localisation.onConnect(false);\r\n      console.log(error);\r\n      this.loading=false ;\r\n      this.notify.onError({ message: \" Verifiez votre connexion internet\" })\r\n    })\r\n\r\n  }\r\n\r\n  loadRemoteData() {\r\n    let loader = this.notify.loading({\r\n      content: \"chargement...\",\r\n    });\r\n    this.loading=true ;\r\n    this.manager.get('secteur', true).then(data => {\r\n      this.secteurs = data ? data : []\r\n      this.loading=false ;\r\n      loader.dismiss();\r\n      this.localisation.onConnect(this.localisation.isOnline());\r\n    },error=>{\r\n      this.localisation.onConnect(false);\r\n      loader.dismiss();\r\n      this.notify.onError({ message: \"Verifiez votre connexion internet\" })\r\n    })\r\n    loader.present();\r\n  }\r\n\r\n\r\n  add(secteur = {}) {\r\n    let modal = this.modalCtrl.create('SecteurPage', { secteur: secteur, inset: true }, { cssClass: 'inset-modal' })\r\n    modal.onDidDismiss(data => {\r\n      let index = -1;\r\n      if (data && data.id) {\r\n        index = this.secteurs.findIndex(item => item.id == data.id);\r\n        this.secteurs.splice(0, 0, data);\r\n      } else if (data && data.deletedId) {\r\n        index = this.secteurs.findIndex(item => item.id == data.deletedId);\r\n        if (index > -1)\r\n          this.secteurs.splice(index, 1);\r\n      }\r\n    })\r\n    modal.present()\r\n  }\r\n\r\n\r\n  search() {\r\n    let queryText = this.queryText.toLowerCase().replace(/,|\\.|-/g, ' ');\r\n    let queryWords = queryText.split(' ').filter(w => !!w.trim().length);\r\n    this.secteurs.forEach(item => {\r\n      item.hide = true;\r\n      this.filter(item, queryWords);\r\n    });\r\n\r\n  }\r\n  filter(item, queryWords) {\r\n    let matchesQueryText = false;\r\n    if (queryWords.length) {\r\n      // of any query word is in the session name than it passes the query test\r\n      queryWords.forEach(queryWord => {\r\n        if (item.nom.toLowerCase().indexOf(queryWord) > -1) {\r\n          matchesQueryText = true;\r\n        }\r\n      });\r\n    } else {\r\n      // if there are no query words then this session passes the query test\r\n      matchesQueryText = true;\r\n    }\r\n    item.hide = !(matchesQueryText);\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/secteurs/secteurs.ts"],"sourceRoot":""}