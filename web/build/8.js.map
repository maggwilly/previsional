{"version":3,"sources":["../../src/pages/vendeurs/vendeurs.module.ts","../../src/pages/vendeurs/vendeurs.ts"],"names":[],"mappings":"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","file":"8.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { VendeursPage } from './vendeurs';\n\n@NgModule({\n  declarations: [\n    VendeursPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(VendeursPage),\n  ],\n})\nexport class VendeursPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/vendeurs/vendeurs.module.ts","import { Component } from '@angular/core';\r\nimport { IonicPage, NavController, NavParams, LoadingController } from 'ionic-angular';\r\nimport { Storage } from '@ionic/storage';\r\nimport { ManagerProvider } from '../../providers/manager/manager';\r\nimport {UserProvider } from '../../providers/user/user';\r\nimport { AppNotify } from '../../app/app-notify'\r\nimport { LocalisationProvider } from '../../providers/localisation/localisation';\r\n\r\n@IonicPage()\r\n@Component({\r\n  selector: 'page-vendeurs',\r\n  templateUrl: 'vendeurs.html',\r\n})\r\nexport class VendeursPage {\r\n   vendeurs:any[]=[]\r\n   requesteds:any[]=[]\r\n   queryText = '';\r\n   loading:boolean=false;\r\n  constructor(\r\n     public navCtrl: NavController,\r\n     public loadingCtrl: LoadingController,\r\n     public manager: ManagerProvider,\r\n     public localisation:LocalisationProvider,\r\n      public userService:UserProvider,\r\n     public notify: AppNotify,\r\n     public storage: Storage,\r\n     public navParams: NavParams\r\n     ) {\r\n  }\r\n\r\n  ionViewDidLoad() {\r\n    this.loadData()\r\n  }\r\n\r\n  loadData(){   \r\n    this.loading =true;\r\n    this.manager.get('vendeur',this.localisation.isOnline()).then(data=>{\r\n      this.vendeurs=data?data:[];\r\n      this.loading=false;\r\n      this.localisation.onConnect(this.localisation.isOnline());\r\n    },error=>{\r\n      this.localisation.onConnect(false);\r\n      this.notify.onError({message:\" Verifiez votre connexion internet\"})\r\n    })\r\n\r\n  }\r\n\r\n  loadRemoteData(){\r\n    let loader= this.notify.loading({\r\n      content: \"chargement...\",\r\n    }); \r\n    this.loading =true;   \r\n    this.manager.get('vendeur',true).then(data=>{\r\n      this.vendeurs=data?data:[];\r\n      this.loading=false;   \r\n      loader.dismiss();       \r\n      this.localisation.onConnect(this.localisation.isOnline());\r\n    },error=>{\r\n      this.localisation.onConnect(false);\r\n      loader.dismiss();   \r\n      this.notify.onError({message:\"Verifiez votre connexion internet\"})\r\n    })\r\n    loader.present();\r\n  }\r\n \r\n  add(){\r\n    let self=this;\r\n    this.notify.showAlert({\r\n      subTitle:\"Nouveau vendeur\",\r\n      message:'Ajouter un membre a votre equipe de vente',\r\n      inputs: [\r\n        {\r\n          name: 'nom',\r\n          type: 'text',\r\n          placeholder: 'Saisir le nom',\r\n          value: ''\r\n\r\n        },       \r\n        {\r\n          name: 'username',\r\n          type: 'tel',\r\n          placeholder: 'Numero de telephone',\r\n          value: ''\r\n\r\n        }\r\n\r\n      ],\r\n      buttons: [\r\n        {\r\n          text: 'Annuler',\r\n          handler: () => {\r\n            console.log('Disagree clicked');\r\n          }\r\n        },\r\n        {\r\n          text: 'Inviter',\r\n          handler: (data) => {\r\n            if(!data.username||data.username==self.userService.user.username)\r\n                       return;\r\n                 let loader= this.notify.loading({\r\n                   content: \"Invitation...\",\r\n                      });\r\n            self.manager.save('request',data,this.localisation.isOnline()).then((req)=>{\r\n              loader.dismiss().then(()=>{\r\n                if(!req.id)\r\n                   return \r\n               this.requesteds.splice(0,0,req); \r\n                 this.notify.onSuccess({message:\"Demande envoyee !\"})\r\n               });\r\n            },error=>{\r\n                loader.dismiss()\r\n                 this.notify.onError({message:\"Verifiez votre connexion internet\"})\r\n            })\r\n             loader.present();\r\n          }\r\n        }\r\n      ]\r\n    })\r\n  }\r\n\r\n\r\n\r\n  deleteRequest(requested:any){\r\n    let loader= this.notify.loading({\r\n      content: \"Suppression...\",\r\n          }); \r\nthis.manager.delete('request',requested,'delete',this.localisation.isOnline()).then(data=>{\r\n if(data.ok){\r\n   loader.dismiss().then(()=>{\r\n     let  index= this.requesteds.findIndex(item=>item.id==data.deletedId);\r\n     if(index>-1)\r\n     this.requesteds.splice(index,1);\r\n     this.notify.onSuccess({message:\"Element supprime\"})\r\n    }); \r\n }else{\r\n   loader.dismiss()\r\n    this.notify.onError({message:\"Cet element est lie a d'autres. Vous ne pouvez pas le supprimer\"})\r\n }\r\n},error=>{\r\n loader.dismiss()\r\n this.notify.onError({message:\"Un probleme est survenu\"})\r\n})\r\n loader.present();\r\n  }\r\n\r\n  deleteUser(user:any){\r\n  this.notify.showAlert({\r\n    title:\"Suppression\",\r\n    message:\"Voulez-vous supprimer ce vendeur de votre equipe ?\",\r\n    buttons: [\r\n      {\r\n        text: 'Annuler',\r\n        handler: () => {\r\n          console.log('Disagree clicked');\r\n        }\r\n      },\r\n      {\r\n        text: 'Supprimer',\r\n        handler: (data) => {\r\n                 let loader= this.notify.loading({\r\n                 content: \"Suppression...\",\r\n                     }); \r\n          this.manager.delete('user',user,'delete',true).then(data=>{\r\n            if(data.ok){\r\n              loader.dismiss().then(()=>{\r\n                let  index= this.vendeurs.findIndex(item=>item.id==data.deletedId);\r\n                this.vendeurs.splice(index,1);\r\n                this.notify.onSuccess({message:\"Element supprime\"})\r\n               }); \r\n            }else{\r\n              loader.dismiss()\r\n               this.notify.onError({message:\"Cet element est lie a d'autres. Vous ne pouvez pas le supprimer\"})\r\n            }\r\n          },error=>{\r\n            loader.dismiss()\r\n            this.notify.onError({message:\"Un probleme est survenu\"})\r\n          })\r\n            loader.present();\r\n        }\r\n      }\r\n    ]\r\n  })\r\n\r\n}\r\n\r\n  search() {\r\n    let queryText = this.queryText.toLowerCase().replace(/,|\\.|-/g, ' ');\r\n    let queryWords = queryText.split(' ').filter(w => !!w.trim().length);\r\n    this.vendeurs.forEach(item => {\r\n      item.hide = true;\r\n      this.filter(item, queryWords);\r\n    });\r\n\r\n  }\r\n  filter(item, queryWords) {\r\n    let matchesQueryText = false;\r\n    if (queryWords.length) {\r\n      // of any query word is in the session name than it passes the query test\r\n      queryWords.forEach(queryWord => {\r\n        if (item.nom.toLowerCase().indexOf(queryWord) > -1) {\r\n          matchesQueryText = true;\r\n        }\r\n      });\r\n    } else {\r\n      // if there are no query words then this session passes the query test\r\n      matchesQueryText = true;\r\n    }\r\n    item.hide = !(matchesQueryText);\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/vendeurs/vendeurs.ts"],"sourceRoot":""}